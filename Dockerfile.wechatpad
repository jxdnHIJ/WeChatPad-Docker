# 使用包含 glibc 的 Alpine 镜像
FROM frolvlad/alpine-glibc:alpine-3.14_glibc-2.34

# 设置工作目录
WORKDIR /app

# 安装所需工具
RUN apk add --no-cache bash curl ca-certificates tzdata

# 拷贝你的项目文件
COPY ./app /app

# 给二进制文件添加执行权限
RUN chmod +x /app/stay && \
    chmod +x /app/assets/swagger-mcp && \
    cp /app/assets/swagger-mcp /usr/bin/swagger-mcp

# 启动 stay（它会加载 .mcp.json）
CMD ["./stay"]
