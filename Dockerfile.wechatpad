# 使用 Debian 替代 Alpine，天然支持 glibc
FROM debian:bullseye

# 设置工作目录
WORKDIR /app

# 安装所需工具
RUN apt-get update && apt-get install -y ca-certificates curl tzdata && rm -rf /var/lib/apt/lists/*

# 拷贝全部文件
COPY ./app /app

# 赋予执行权限
RUN chmod +x /app/stay \
    && chmod +x /app/assets/swagger-mcp \
    && cp /app/assets/swagger-mcp /usr/bin/swagger-mcp

# 默认运行 stay（内部会加载 .mcp.json 并自动运行 swagger-mcp）
CMD ["./stay"]
